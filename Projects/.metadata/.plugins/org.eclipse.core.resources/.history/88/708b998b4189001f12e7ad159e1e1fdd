package Services;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import Controller.DBconnect;
import Model.contactModel;

public class contactServices {

	
	
	public boolean insertData(contactModel cModel) throws ClassNotFoundException {
	    boolean result = false; // Initialize result to false
	    try {
	        // Get data from model
	        String fname = cModel.getName();
	        String email = cModel.getEmail();
	        String message = cModel.getMessage();
	       
	        // Establish the connection
	        DBconnect db = new DBconnect();
	        Connection conn = db.getConnection(); // Use Connection directly
	        String sql = "INSERT INTO contactus (name, email, message) VALUES (?, ?, ?)";
	        
	        // Use PreparedStatement to avoid SQL injection
	        PreparedStatement pstmt = conn.prepareStatement(sql);
	        pstmt.setString(1, fname);
	        pstmt.setString(2, email);
	        pstmt.setString(3, message);
	      
	        int rowsAffected = pstmt.executeUpdate();
	        pstmt.close();

	        if (rowsAffected > 0) {
	            System.out.println("Data inserted successfully!");
	            result = true; // Insertion was successful
	        } else {
	            System.out.println("No rows affected. Insertion may have failed.");
	        }

	    } catch (SQLException e) {
	        e.printStackTrace();
	    } finally {
	        // Ensure the connection is closed if needed (not shown here)
	    }
	    return result; // Return the result indicating success or failure
	}

	public boolean updateData(contactModel cModel) {
		
		return false;
	}

	
}
